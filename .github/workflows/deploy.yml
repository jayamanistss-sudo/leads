name: Deploy PHP Application to cPanel

on:
  push:
    branches:
      - main

jobs:
  deploy:
    name: Deploy PHP App
    runs-on: ubuntu-latest

    steps:
      - name: Get latest code
        uses: actions/checkout@v4

      - name: Sync files to cPanel
        uses: SamKirkland/FTP-Deploy-Action@v4.3.6
        with:
          server: ftp.serverbyt.in
          username: dev@stss.in
          password: jaya91599@          # ⚠️ visible—replace later with secrets
          
          protocol: sftp                 # SFTP required for your hosting
          port: 22                       # SFTP port
          timeout: 600                   # slow shared hosting → higher timeout

          local-dir: ./                  # upload entire repo
          server-dir: leads/             # remote folder

          exclude: |
            .github/**
            tests/**
            node_modules/**
            vendor/**
            admin/**
            .git/**
            *.md

          log-level: verbose
