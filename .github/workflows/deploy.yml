name: Deploy PHP Application to cPanel via SFTP

on:
  push:
    branches:
      - main

jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout the repository
      - name: Checkout code
        uses: actions/checkout@v4

      # Step 2: Deploy via SFTP
      - name: Deploy to cPanel via SFTP
        uses: appleboy/scp-action@master
        with:
          host: ftp.stss.in          # Your cPanel server
          username: stss.in          # FTP/SFTP username
          password: 'cTL}}Ys@5GF'    # Direct password (not secure)
          port: 22                   # SFTP port (usually 22)
          source: "."                # Upload everything in repo
          target: "demo/"            # Remote directory on server
          strip_components: 0        # Keeps folder structure
          rsync: true                # Only upload changed files
          exclude: |
            .github/**
            tests/**
            node_modules/**
            vendor/**
            admin/**
